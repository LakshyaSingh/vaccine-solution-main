{"version":3,"sources":["webpack:///./src/pages/solution/orderms/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"yeAMO,IAAMA,EAAe,GAEtBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,2EAC5B,kBAASC,KAGZG,EAAkBL,EAAc,mBAChCM,EAAcN,EAAc,eAC5BO,EAAaP,EAAc,cAC3BQ,EAAc,CAClBT,gBAEIU,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGV,E,oIACF,mBACD,OAAO,YAACO,EAAD,KAAeD,EAAiBN,EAAhC,CAAuCU,WAAYA,EAAYC,QAAQ,cAG5E,YAACR,EAAD,CAAiBQ,QAAQ,mBAAzB,4GAGA,YAACP,EAAD,CAAaO,QAAQ,eACvB,YAACN,EAAD,CAAYM,QAAQ,cAApB,YACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,kBACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,2BACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,yBAEE,kCACA,qNACA,sBACE,kBAAIC,WAAW,MAAf,6HACA,kBAAIA,WAAW,MAAf,+CACA,kBAAIA,WAAW,MAAf,oIAEF,+NACA,yBAAQ,sBAAMA,WAAW,KAAQ,CAC7B,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,YAPV,WAUJ,sBAAMA,WAAW,QAAW,CAC1B,UAAa,qCACb,MAAS,CACP,cAAiB,qBACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,gBAAmB,4lBACnB,eAAkB,QAClB,QAAW,YAnBX,OAsBR,qBAAKA,WAAW,QAAW,CACrB,UAAa,0BACb,IAAO,WACP,MAAS,WACT,IAAO,oFACP,OAAU,CAAC,yFAA0F,yFAA0F,0FAA2F,2FAC1R,MAAS,oCACT,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,IAAO,IACP,KAAQ,KAEV,QAAW,UAtCT,WAyCR,yIACA,yBAAQ,sBAAMA,WAAW,KAAQ,CAC7B,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,WAPV,WAUJ,sBAAMA,WAAW,QAAW,CAC1B,UAAa,qCACb,MAAS,CACP,cAAiB,sBACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,gBAAmB,47BACnB,eAAkB,QAClB,QAAW,YAnBX,OAsBR,qBAAKA,WAAW,QAAW,CACrB,UAAa,0BACb,IAAO,kBACP,MAAS,kBACT,IAAO,2FACP,OAAU,CAAC,gGAAiG,gGAAiG,iGAC7M,MAAS,kCACT,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,IAAO,IACP,KAAQ,KAEV,QAAW,UAtCT,WAyCR,+KACA,qBAAG,sBAAQA,WAAW,KAAnB,sBAAH,IAA8D,mBAAGA,WAAW,KAAQ,CAChF,KAAQ,gEADkD,sBAG9D,qBAAG,sBAAQA,WAAW,KAAnB,qBACH,iGACA,yBAAQ,sBAAMA,WAAW,KAAQ,CAC7B,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,YAPV,WAUJ,sBAAMA,WAAW,QAAW,CAC1B,UAAa,qCACb,MAAS,CACP,cAAiB,UACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,gBAAmB,41BACnB,eAAkB,QAClB,QAAW,YAnBX,OAsBR,qBAAKA,WAAW,QAAW,CACrB,UAAa,0BACb,IAAO,kBACP,MAAS,kBACT,IAAO,2FACP,OAAU,CAAC,gGAAiG,gGAAiG,iGAAkG,kGAC/S,MAAS,oCACT,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,IAAO,IACP,KAAQ,KAEV,QAAW,UAtCT,WAyCR,qBAAG,sBAAQA,WAAW,KAAnB,8BACH,qBAAG,sBAAQA,WAAW,KAAnB,qBACH,iGACA,sBACE,kBAAIA,WAAW,MAAf,gBACA,kBAAIA,WAAW,MAAf,iBAEF,mEACA,sBACE,kBAAIA,WAAW,MAAf,sBACA,kBAAIA,WAAW,MAAf,aACA,kBAAIA,WAAW,MAAf,iBAEF,wCACA,8LACA,yDAAwC,mBAAGA,WAAW,KAAQ,CAC1D,KAAQ,gEAD4B,0BAAxC,mGAGA,oVACA,wGAAuF,0BAAYA,WAAW,KAAvB,0BAAvF,KACA,wCACA,6PACA,4EAA2D,mBAAGA,WAAW,KAAQ,CAC7E,KAAQ,iIAD+C,qBAA3D,QAGA,oDACA,yPACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,mBADZ,2IAKL,2EACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,mBADZ,iNAaL,4BAAW,mBAAGA,WAAW,KAAQ,CAC7B,KAAQ,6GADD,kBAGX,uDACA,mIAAkH,mBAAGA,WAAW,KAAQ,CACpI,KAAQ,sJADsG,wBAGlH,+DAA8C,0BAAYA,WAAW,KAAvB,gBAA9C,8CAAqJ,0BAAYA,WAAW,KAAvB,WAArJ,eACA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,uGAA2H,mBAAGA,WAAW,KAAQ,CAC7I,KAAQ,6HAD+G,sBAA3H,+CAE+E,0BAAYA,WAAW,KAAvB,SAF/E,0OAGA,mBAAKA,WAAW,MAAK,sBAAMA,WAAW,OAAU,CAC5C,UAAa,mBADI,gIAMvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,8BAAkD,mBAAGA,WAAW,KAAQ,CACpE,KAAQ,+GADsC,sCAAlD,6CAKJ,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,gWAaL,wGAAuF,mBAAGA,WAAW,KAAQ,CACzG,KAAQ,sHAD2E,6CAAvF,oHAGA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,yBADZ,obASL,wDACA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,4JAAgL,0BAAYA,WAAW,KAAvB,qCAAhL,mEACA,mBAAKA,WAAW,MAAK,sBAAMA,WAAW,OAAU,CAC5C,UAAa,wBADI,6OAQzB,0CACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,mBADZ,qTAQL,sEAAqD,0BAAYA,WAAW,KAAvB,kBAArD,+NACA,oGACA,8CACA,wCACA,mCACA,0FACA,yBAAQ,sBAAMA,WAAW,KAAQ,CAC7B,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,YAPV,WAUJ,sBAAMA,WAAW,QAAW,CAC1B,UAAa,qCACb,MAAS,CACP,cAAiB,qBACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,gBAAmB,g0BACnB,eAAkB,QAClB,QAAW,YAnBX,OAsBR,qBAAKA,WAAW,QAAW,CACrB,UAAa,0BACb,IAAO,IACP,MAAS,IACT,IAAO,mFACP,OAAU,CAAC,wFAAyF,wFAAyF,yFAA0F,0FACvR,MAAS,oCACT,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,IAAO,IACP,KAAQ,KAEV,QAAW,UAtCT,YA6CZH,EAAWI,gBAAiB","file":"component---src-pages-solution-orderms-index-mdx-2b933d8ddf89b6ab4fbd.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/vaccine-solution-main/vaccine-solution-main/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\nThis microservice manages vaccine orders for a world wide demand and distribution. This is an example of \n    </PageDescription>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Overview</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Build with s2i</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Assess application runs</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Demonstration script</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Overview`}</h2>\n    <p>{`This project implements a very simple event driven microservice to support the Create, Read, Update, of vaccine orders. This implementation highlights the following capbilities / patterns:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Quarkus reactive microservice using Microprofile 3.x - reactive messaging extension to consume Vaccine lot shipment plans`}</li>\n      <li parentName=\"ul\">{`DB2 with Hibernate ORM with Quarkus Panache`}</li>\n      <li parentName=\"ul\">{`Quarkus Debezium Outbox pattern to get update to the OrderEvents table using Debezium change data capture and DB2 change agent.`}</li>\n    </ul>\n    <p>{`In term of business scenario, a sale representative uses his mobile device or web browser to enter information about a vaccine order to be shipped to a given country or a province within a country. `}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"49.65277777777777%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz32Qz07CQBDG+1xK1LsPoXjSRzDevUFMjPFPd7vt4hHhVbiacATagInGtqJd6OfOtJQi6ia/ZHZm9ptvx2k0Wzg4aVfsW/aabewctf5kt6Rx3OL+w7MrhmJHej4IUePuwYWQqryrqu7anPJ9nF/e4vTiGjf3HjxV1FY9TkdrMJ01UgoEQQCtAyhlH3ke9wSBz9Cwe+Fxz+PqXanjUHITDdcVLKKUdSklhJBWXMO37sghDSHornmQrt47RWItSE3SipAYiVJcv//MUT9R/Kh0SMFgMMBwOMRkMtkgDENEUYjRaITxeLxVJ6IoQrfb5WHVl6fTKRaLBbZOnsPkm6nf+vr9PruuBMnJcrlElmUwxvAjionnMMXnl4HhnMFHmnIPkVlyO7TX660FaQez2aw0lOO/Q3UaUstsOyRB2tF8Pkccx0iSpILudThvHRa1BC+v73iLU7vDJ97hN8OGf480N/YLAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"order ui\",\n          \"title\": \"order ui\",\n          \"src\": \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/7fc1e/order-ui.png 288w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/a5df1/order-ui.png 576w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png 1152w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/433df/order-ui.png 1356w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`The user interface is for demonstration purpose only and illustrates some standard Vuejs development practices. `}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"672px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"54.166666666666664%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACZklEQVQoz22TSWsUURSF+z+4UAguBBf+CTcuJA6L7MSdE4iKKGQlKJIYg0HJQlBE3ASJIWKiZFhkozhEpVFMJ0pMJ2nbTnoea+iaqz5vvY5RwVcc3n31bp177lCJ0DSolmqU8hWFSrFK0G6DYxHZAqcDHLtjyztcG9cwGJ/+yMjEOx5PzjP64j2NSp1Eq9Zg37FhdnbfoOvIIHt6hkilCxCBZXs4jo9t+7TbzrYdBhGFssau7gH2n33AgfMP2XGwn9TXTIfwVN8Yx6+McPL6KKf7nrC+USVevi8fRyGu46E1dTzXE/gEfoCmW5wbHOfynQl6h59zpn+MzVyRBL6NkhMGosAjEoJAbF8Qk0XyeF6AZboSIFB2FEZU6wZ7e27RdUgyOzzA7qM3Wf7+k0RqucxMsoxmefxetm2LEpcwDPFEZRAIkQTzZXc9VzxEoWlx6fYE1+7PcvXeDBeGnnUU9j1a4MRAkleLFfLSnEy+jtG2yElz8qW6Ultr6ZQrLSEKWVrNkauYEuyPgO0lzUrMvs1ydzrLYqbGRYnSOzxFOlvg6ctPvEmlld/UfIq55Ddlm06A4URSDlEdxGWJVGkCQSgTsFVDVBqW3ZbIPtVmi7kPCyyt56S7Bq+TX5j/vEi90VBEkcCR1GP1cY1jQlXtmDCw2uoQ10e3XCzpYkM3qTU1NgpFlpZXWFldI7dZwLAcTNsVlS4tGSP/f4RhqykDa6thtjQDW8hcKXi8VwslQZHsWoYf6TW513EMU91ZmkksJoqzUrsMva6RiORPCaWr6sUWwi1Iq9W5vJGjWS794/O37/ZZiH8ByR0f86FFEGIAAAAASUVORK5CYII=')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"vaccine order 1\",\n          \"title\": \"vaccine order 1\",\n          \"src\": \"/vaccine-solution-main/static/23e920c035c28539be18090ce759738a/bad2b/vaccine-order-1.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/23e920c035c28539be18090ce759738a/7fc1e/vaccine-order-1.png 288w\", \"/vaccine-solution-main/static/23e920c035c28539be18090ce759738a/a5df1/vaccine-order-1.png 576w\", \"/vaccine-solution-main/static/23e920c035c28539be18090ce759738a/bad2b/vaccine-order-1.png 672w\"],\n          \"sizes\": \"(max-width: 672px) 100vw, 672px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`The component writes to the database (DB2) all the orders received, but also produces records to Kafka via the Outbox pattern and change data capture.`}</p>\n    <p><strong parentName=\"p\">{`Github repository:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr\"\n      }}>{`Vaccine-order-mgr`}</a></p>\n    <p><strong parentName=\"p\">{`Order Life Cycle`}</strong></p>\n    <p>{`The order follows a set of states as described in the following diagram:`}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"46.875%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACH0lEQVQoz02Sy08TURSH+0e5cunGhVt3Jm4lujQRjS6UEA0LYkh8JcQFSlKxaMQSw0MTy6MEiAoaWh4VppS20ulr2s7r3pn5vHMF9WzOuefO/c7vnDMJlE2uVBl5/5Pdak+dIuyuh93xiKIovsb3BMKXOCof+1DlwijUsZQBQkg8R+g48UbBRj+WyB80MVaLbMwWsBoOwpO4UmD6Hbpth2OjTafpIAOFC4Qu7No+tZJFz3K1CM8VJLaOunwvNCjvVBi/9ZknfbMUczWtrKkebBh1HvfNcPd8ihc3MzpfOjSpmhYvb2e4c+4VY/0ZwjDURRL6CwQd4Sgv9UmGPsdlU8eu59OodtldO+QoX9G5ngzpuB5HO3VW09vkFvZwVdvRKTC/ViX5IEs2lUNYPZIDSwxfTvN1Zl/NK2B9usDEUJZ0Ko9Qs4vCQLUu2PxkMDWyxtLUjgIG/4DLk9sMXXynQMu47R5vBxd5enWOb/MHSq0keU8VuDTNh+EVNT4fR6nz1XxT91cYuDDJxECWIDgBxtv63xzV4lahRsVonrQv1ZYl5f06RaNGy/aUukAD/1j018esREyNB1qt1TFKZX6ZLUauzHL9zBhzzzfVQ18vqv/sOKM3Mri+T6/VwnEcFl/nmRjMspDMESiGVhidkK1ul2bbomVZlAt19jeOaZu2rl3ea/AjU8Q8bOMLQcmo4Ng26UdfeHZtnqmH6/ofjFm/AeF6it0arcCoAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"vaccine order 2\",\n          \"title\": \"vaccine order 2\",\n          \"src\": \"/vaccine-solution-main/static/fe18efd58d03fc4975aa0abf3e08904c/3cbba/vaccine-order-2.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/fe18efd58d03fc4975aa0abf3e08904c/7fc1e/vaccine-order-2.png 288w\", \"/vaccine-solution-main/static/fe18efd58d03fc4975aa0abf3e08904c/a5df1/vaccine-order-2.png 576w\", \"/vaccine-solution-main/static/fe18efd58d03fc4975aa0abf3e08904c/3cbba/vaccine-order-2.png 1152w\", \"/vaccine-solution-main/static/fe18efd58d03fc4975aa0abf3e08904c/1b26f/vaccine-order-2.png 1672w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p><strong parentName=\"p\">{`Kafka topics produced to:`}</strong></p>\n    <p><strong parentName=\"p\">{`Events produced:`}</strong></p>\n    <p>{`We will simplify the process and aggregate in the following event types:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`orderCreated`}</li>\n      <li parentName=\"ul\">{`orderUpdated`}</li>\n    </ul>\n    <p>{`Some events are related to the vaccine lot`}</p>\n    <ul>\n      <li parentName=\"ul\">{`lotAssignedToOrder`}</li>\n      <li parentName=\"ul\">{`lotLoaded`}</li>\n      <li parentName=\"ul\">{`lotDelivered`}</li>\n    </ul>\n    <h2>{`Build with s2i`}</h2>\n    <p>{`This microservice is built using maven and Quarkus extensions. We have already pushed the last version of this service on dockerhub, if you do not want to build it. `}</p>\n    <p>{`To build and run locally see the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr\"\n      }}>{`repository main readme`}</a>{` as we have different docker-compose files to run in demonstration mode or in development mode.`}</p>\n    <p>{`In this section we address how to use OpenShift Source to Image to build and deploy the application to OpenShift. The application is using environment variables to access to user, password, URLs to access DB2, and Kafka deployed in Cloud Pak for Integration. So first thing is to define such secrets and config map.`}</p>\n    <p>{`As an example we created the OpenShift project called “vaccine” with a command: `}<inlineCode parentName=\"p\">{`oc new-project vaccine`}</inlineCode>{`.`}</p>\n    <h3>{`Pre requisites`}</h3>\n    <p>{`The orders are persisted in an external DB2 instance running on IBM Cloud Pack for Data. You need to get the username and password to connect to the DB2 instance with the jdbc URL (something like jdbc:db2://dashdb-…:50001/BLUDB)`}</p>\n    <p>{`Get an instance of Kafka deployed on OpenShift like `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/use-cases/overview/pre-requisites#install-event-streams-using-operators\"\n      }}>{`IBM Event Streams`}</a>{`…). `}</p>\n    <h3>{`Defining DB access secrets`}</h3>\n    <p>{`We need to get IBM DB2 user credentials and JDBC URL as secrets. So from the DB2 service credentials get the following attributes: user, password, and JDBC URL. You need to encrypt each of those values using base64 encoding:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# Example of URL encryption\necho \"jdbc:db2://dashdb-txn-sbox-....services.dal.bluemix.net:50001/BLUDB:sslConnection=true;\" | base64\n`}</code></pre>\n    <p>{`Then define a secret manifest with a command like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f - <<EOF\napiVersion: v1\nkind: Secret\nmetadata:\n  name: vaccine-order-db-secret\ndata:\n    DB_URL: ...encrypted URL...\n    DB_USER: ...encrypted user..\n    DB_PWD: ...encrypted pwd\nEOF\n`}</code></pre>\n    <p>{`See `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr/blob/master/src/main/kubernetes/secrets.yaml\"\n      }}>{`the file here`}</a></p>\n    <h3>{`Get Event Streams credentials`}</h3>\n    <p>{`For Event Streams get URL of the bootstrap server and the service credentials (TLS certificates) following `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/use-cases/overview/pre-requisites#getting-tls-authentication-from-event-streams-on-openshift\"\n      }}>{`those instructions.`}</a></p>\n    <p>{`We assume Event Streams is deployed in `}<inlineCode parentName=\"p\">{`eventstreams`}</inlineCode>{` project and the solution is running under `}<inlineCode parentName=\"p\">{`vaccine`}</inlineCode>{` namespace.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Client application will use the server side public TLS certificate to connect to Kafka Brokers. See `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/use-cases/overview/pre-requisites#get-tls-server-public-certificate\"\n          }}>{`those instructions`}</a>{` to get the Server TLS certificate into the `}<inlineCode parentName=\"p\">{`certs`}</inlineCode>{` folder for local run as a secret for deploying to OpenShift. The following command copy the event streams ca cert secret to the current OpenShift project so it can be mounted to a path for the order microservice to get access to:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`# Under the 'vaccine' project\noc get secret light-es-cluster-ca-cert   -n eventstreams --export -o yaml | oc apply -f -\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Modify the config map from `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr/blob/master/src/main/kubernetes/configmap.yaml\"\n          }}>{`src/main/kubernetes/configmap.yaml`}</a>{` with the URL of your bootstrap server.`}</p>\n      </li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: vaccine-order-ms-cm\ndata:\n  KAFKA_BOOTSTRAP_SERVERS: \"light-es-kafka-bootstrap.eventstreams.svc:9092\"\n  KAFKA_SSL_PROTOCOL: \"TLSv1.2\"\n  KAFKA_SSL_TRUSTSTORE_LOCATION: \"/deployments/certs/server/ca.p12\"\n  KAFKA_SSL_TRUSTSTORE_TYPE: \"PKCS12\"\n  SHIPMENT_PLAN_TOPIC: \"vaccine_shipment_plans\"\n`}</code></pre>\n    <p>{`Those environment variables are used by the application, and configured via the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr/blob/master/src/main/resources/application.properties\"\n      }}>{`src/main/resources/application.properties`}</a>{`. Below is the declarations that define environment variables from the previously created secrets and configmap.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-propertiies\"\n      }}>{`quarkus.openshift.env.configmaps=vaccine-order-ms-cm\nquarkus.openshift.env.secrets=vaccine-order-secrets\nquarkus.openshift.env.mapping.KAFKA_SSL_TRUSTSTORE_PASSWORD.from-secret=light-es-cluster-ca-cert\nquarkus.openshift.env.mapping.KAFKA_SSL_TRUSTSTORE_PASSWORD.with-key=ca.password\nquarkus.openshift.mounts.es-cert.path=/deployments/certs/server\nquarkus.openshift.secret-volumes.es-cert.secret-name=light-es-cluster-ca-cert\n`}</code></pre>\n    <h3>{`Remote access to event streams`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`If you need to access Event Streams from an application running outside of CP4I cluster then create a scram access user. Verify the user is created with `}<inlineCode parentName=\"p\">{`oc get kafkausers -n eventstreams`}</inlineCode>{`, and then add the following declarations into the config maps:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-properties\"\n          }}>{`KAFKA_SECURITY_PROTOCOL: \"SASL_SSL\"\nKAFKA_SASL_MECHANISM: \"SCRAM-SHA-512\"\nKAFKA_SASL_JAAS_CONFIG: \"org.apache.kafka.common.security.scram.ScramLoginModule required username\\\\=\\\\\"\\${KAFKA_USER}\\\\\" password\\\\=\\\\\"\\${KAFKA_PWD}\\\\\";\"\n`}</code></pre>\n      </li>\n    </ul>\n    <h3>{`Build and deploy`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# if not logged yes to your openshift cluster where the docker private registry resides do:\noc login --token=... --server=https://c...\n\n# Then build the code using source 2 image and push the image to the internal registry\nmvn package -Dui.deps -Dui.dev -Dquarkus.kubernetes.deploy=true -DskipTests\n`}</code></pre>\n    <p>{`It can take some seconds to build and deploy: `}<inlineCode parentName=\"p\">{`oc get pods -w`}</inlineCode>{` lets you see the build pods and the running app once the build is done. As we set properties to expose the application, an OpenShift route was created. The url is visible at the end of the build output, something like:`}</p>\n    <p>{`…The deployed application can be accessed at: http://quarkus-kstreams-lab3…`}</p>\n    <h2>{`Demonstration script`}</h2>\n    <h3>{`User interface`}</h3>\n    <h3>{`REST APIs`}</h3>\n    <p>{`The REST end point for this service expose the following OpenAPI:`}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"82.29166666666666%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACCklEQVQ4y6XUyW/TQBTHcf//EgfEAU4VEkI9FIR6QKgqB1rUqgvdkjRkq9skjuM4i/exZ+z4y8StClzowuGjZ41mfn6jJ9tIEsHu3jGHR2ccHZ9xUbvk284+xz/OOTg84fveIVvbO5yc1vSeU13r9Mwb+rN94nROrgqklCilKkYmFc5CEESCKEm1rKqxyEjSjDTVa1Fc1dXB5bKgLEvKAh3wd1gVGAtJZ5wwmArcIKvMQk3Xha55rrT8/sAq4FZ2H/Z7TWJI3aHMlxTLkkIfzJW6C1HV85+bb6l/MpTeNOqbDMweIokpCt1N9eZb+RNVV96u+3y58Bi4Ee4iZh7KZzN8PYSNZsL6peC8P6NuWgy8BMsXz2J4ach7+ytv7S1qrkl7PGSUzLHiOcNo9mRGkEg+6Q43dIfN4YJ236EznOqph0zjHFdfw40kEz3xSfCwKvBDrWD9fEnLjjFtnys74GYS6dDknu0rxo9QBW42Mj7WM1pWQM+a0Rst6Aym/Lx2dMcubf089lcdSJwH6KEo3tVhrQYNS9C1PLp2iOUpJjE4UVmxg0J3+TAjTULsxmfs2iYT6wrb6jMe9fFmY0LfJfTu+I9jqNhjufeKcvcFQecIp1tnftVA2F1y9xo1MVHu4xly4ZG+WUO+fE2wf4DT6jBttghNE2lZZMPhkxjV9xlHWogUArn6q/yHX485txu4FmjyAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"4\",\n          \"title\": \"4\",\n          \"src\": \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/3cbba/openapi.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/7fc1e/openapi.png 288w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/a5df1/openapi.png 576w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/3cbba/openapi.png 1152w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/7dc98/openapi.png 1200w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}